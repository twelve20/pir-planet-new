// Product data
const products = {
    1: {
        id: 1,
        name: 'LOGICPIR БАНЯ ФОЛЬГА Г1 30 мм',
        price: '622 ₽',
        image: 'images/techno1.webp',
        hoverImage: 'images/techno2.webp',
        description: 'PIR плита с алюминиевой фольгой толщиной 30 мм — идеальное решение для утепления бань и саун. Фольгированное покрытие отражает тепло обратно в помещение, создавая эффект термоса и существенно повышая энергоэффективность.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '30 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга Ф/Ф',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,021 Вт/(м·°C)',
            'Плотность': '30 кг/м³',
            'Водопоглощение': 'Не более 1%'
        },
        features: [
            'Отражение до 97% теплового излучения',
            'Влагостойкость и паронепроницаемость',
            'Легкий монтаж благодаря L-кромке',
            'Срок службы более 50 лет'
        ]
    },
    2: {
        id: 2,
        name: 'LOGICPIR БАНЯ ФОЛЬГА Г1 40 мм',
        price: '692 ₽',
        image: 'images/techno1.webp',
        hoverImage: 'images/techno2.webp',
        description: 'Усиленная PIR плита толщиной 40 мм с фольгированным покрытием для максимальной теплоизоляции бань и саун. Обеспечивает быстрый прогрев помещения и долгое сохранение тепла.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '40 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга Ф/Ф',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,021 Вт/(м·°C)',
            'Плотность': '30 кг/м³',
            'Водопоглощение': 'Не более 1%'
        },
        features: [
            'Отражение до 97% теплового излучения',
            'Устойчивость к высоким температурам',
            'Простой и быстрый монтаж',
            'Экономия до 40% на отоплении'
        ]
    },
    3: {
        id: 3,
        name: 'LOGICPIR БАНЯ ФОЛЬГА Г1 50 мм',
        price: '868 ₽',
        image: 'images/techno1.webp',
        hoverImage: 'images/techno2.webp',
        description: 'Максимальная теплоизоляция для бань и саун. PIR плита 50 мм с фольгированным покрытием обеспечивает превосходное сохранение тепла даже в самые холодные зимы.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '50 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга Ф/Ф',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,021 Вт/(м·°C)',
            'Плотность': '30 кг/м³',
            'Водопоглощение': 'Не более 1%'
        },
        features: [
            'Максимальная энергоэффективность',
            'Идеально для северных регионов',
            'Минимальные теплопотери',
            'Долговечность более 50 лет'
        ]
    },
    4: {
        id: 4,
        name: 'LOGICPIR СТЕКЛОХОЛСТ 30 мм',
        price: '833 ₽',
        image: 'images/techno5.webp',
        hoverImage: 'images/techno6.webp',
        description: 'Универсальная PIR плита со стеклохолстом толщиной 30 мм для утепления стен, полов и кровли. Отличается высокой прочностью и устойчивостью к механическим повреждениям.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '30 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Стеклохолст',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,022 Вт/(м·°C)',
            'Плотность': '32 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Высокая механическая прочность',
            'Подходит для любых конструкций',
            'Устойчивость к влаге',
            'Не подвержен гниению и плесени'
        ]
    },
    5: {
        id: 5,
        name: 'LOGICPIR СТЕКЛОХОЛСТ 50 мм',
        price: '1043 ₽',
        image: 'images/techno5.webp',
        hoverImage: 'images/techno6.webp',
        description: 'PIR плита со стеклохолстом 50 мм - оптимальный выбор для комплексного утепления дома. Обеспечивает отличную теплоизоляцию при любых погодных условиях.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '50 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Стеклохолст',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,022 Вт/(м·°C)',
            'Плотность': '32 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Оптимальное соотношение цена/качество',
            'Подходит для стен, полов и кровли',
            'Высокая энергоэффективность',
            'Снижение расходов на отопление до 35%'
        ]
    },
    6: {
        id: 6,
        name: 'LOGICPIR СТЕКЛОХОЛСТ 80 мм',
        price: '1429 ₽',
        image: 'images/techno5.webp',
        hoverImage: 'images/techno6.webp',
        description: 'Усиленная PIR плита 80 мм со стеклохолстом для профессионального утепления. Идеально подходит для северных регионов и объектов с повышенными требованиями к теплоизоляции.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '80 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Стеклохолст',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,022 Вт/(м·°C)',
            'Плотность': '32 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Максимальная теплозащита',
            'Соответствует требованиям для северных регионов',
            'Отличная звукоизоляция',
            'Экономия до 45% на отоплении'
        ]
    },
    7: {
        id: 7,
        name: 'LOGICPIR СТЕКЛОХОЛСТ 100 мм',
        price: '1535 ₽',
        image: 'images/techno5.webp',
        hoverImage: 'images/techno6.webp',
        description: 'Профессиональная PIR плита максимальной толщины 100 мм для экстремально холодных климатических условий. Обеспечивает превосходную теплоизоляцию промышленных и жилых объектов.',
        specs: {
            'Размер': '1190х590 мм',
            'Толщина': '100 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Стеклохолст',
            'Кромка': 'L-кромка',
            'Коэффициент теплопроводности': '0,022 Вт/(м·°C)',
            'Плотность': '32 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Максимальная теплоизоляция на рынке',
            'Подходит для экстремальных климатических зон',
            'Превосходная звукоизоляция',
            'Максимальная экономия энергоресурсов'
        ]
    },
    8: {
        id: 8,
        name: 'PIR плита для бани ФОЛЬГА 30 мм',
        price: '566 ₽',
        image: 'images/pirro1.webp',
        hoverImage: 'images/pirro2.webp',
        description: 'PIR плита с алюминиевой фольгой толщиной 30 мм — оптимальное решение для утепления бань, саун, бассейнов и помещений с высокой влажностью. Фольгированное покрытие отражает до 97% теплового излучения, сокращая время прогрева и затраты на отопление.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '30 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга',
            'Кромка': 'L-кромка',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Водопоглощение': 'Менее 1%'
        },
        features: [
            'Отражение до 97% тепла',
            '100% влагостойкость',
            'Идеально для бань и саун',
            'Быстрый прогрев помещения'
        ]
    },
    9: {
        id: 9,
        name: 'PIR плита для бани ФОЛЬГА 40 мм',
        price: '692 ₽',
        image: 'images/pirro1.webp',
        hoverImage: 'images/pirro2.webp',
        description: 'PIR плита с алюминиевой фольгой толщиной 40 мм обеспечивает повышенную теплоизоляцию для бань и саун. Увеличенная толщина гарантирует лучшее сохранение тепла и снижение теплопотерь через стены и потолок.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '40 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга',
            'Кромка': 'L-кромка',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Водопоглощение': 'Менее 1%'
        },
        features: [
            'Повышенная теплоизоляция',
            'Устойчивость к влаге 100%',
            'Экономия до 40% на отоплении',
            'Простой монтаж'
        ]
    },
    10: {
        id: 10,
        name: 'PIR плита для бани ФОЛЬГА 50 мм',
        price: '782 ₽',
        image: 'images/pirro1.webp',
        hoverImage: 'images/pirro2.webp',
        description: 'PIR плита с алюминиевой фольгой толщиной 50 мм — максимальная теплоизоляция для бань и саун. Идеальна для регионов с холодным климатом, обеспечивает минимальные теплопотери и быстрый прогрев парной.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '50 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга',
            'Кромка': 'L-кромка',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Водопоглощение': 'Менее 1%'
        },
        features: [
            'Максимальная энергоэффективность',
            'Для северных регионов',
            'Минимальные теплопотери',
            'Долговечность более 50 лет'
        ]
    },
    11: {
        id: 11,
        name: 'PIR Плита ФОЛЬГА 100 мм',
        price: '5564 ₽',
        image: 'images/pirro1.webp',
        hoverImage: 'images/pirro2.webp',
        description: 'PIR плита с алюминиевой фольгой толщиной 100 мм — профессиональное решение для утепления объектов с экстремальными требованиями к теплоизоляции. Применяется в холодильных складах, промышленных объектах и помещениях с особыми условиями.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '100 мм',
            'Горючесть': 'Г1 (слабогорючий)',
            'Покрытие': 'Алюминиевая фольга',
            'Кромка': 'L-кромка',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Водопоглощение': 'Менее 1%'
        },
        features: [
            'Максимальная толщина изоляции',
            'Для промышленных объектов',
            'Экстремальная энергоэффективность',
            'Срок службы более 50 лет'
        ]
    },
    12: {
        id: 12,
        name: 'PIR Плита КРАФТ БУМАГА 30 мм',
        price: '408 ₽',
        image: 'images/pirro3.webp',
        hoverImage: 'images/pirro4.webp',
        description: 'PIR плита с покрытием из крафт-бумаги толщиной 30 мм — универсальное решение для утепления перекрытий, полов, стен. Подходит для внутренней теплоизоляции под сухую отделку, в системах "Теплый пол", чердачных перекрытий.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '30 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Крафт бумага',
            'Кромка': 'Ровная',
            'Теплопроводность': '0,023 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Для внутреннего утепления',
            'Подходит для полов и стен',
            'Оптимальная цена',
            'Легкий монтаж'
        ]
    },
    13: {
        id: 13,
        name: 'PIR Плита КРАФТ БУМАГА 40 мм',
        price: '590 ₽',
        image: 'images/pirro3.webp',
        hoverImage: 'images/pirro4.webp',
        description: 'PIR плита с покрытием из крафт-бумаги толщиной 40 мм обеспечивает повышенную теплоизоляцию для внутренних работ. Идеальна для утепления полов, перекрытий, стен под гипсокартон или вагонку.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '40 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Крафт бумага',
            'Кромка': 'Ровная',
            'Теплопроводность': '0,023 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Повышенная теплоизоляция',
            'Для системы "Теплый пол"',
            'Универсальное применение',
            'Экономия на отоплении'
        ]
    },
    14: {
        id: 14,
        name: 'PIR Плита КРАФТ БУМАГА 50 мм',
        price: '595 ₽',
        image: 'images/pirro3.webp',
        hoverImage: 'images/pirro4.webp',
        description: 'PIR плита с покрытием из крафт-бумаги толщиной 50 мм — максимальная теплоизоляция для внутренних работ. Применяется для утепления чердачных перекрытий, полов, стен в холодных регионах.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '50 мм',
            'Горючесть': 'Г4',
            'Покрытие': 'Крафт бумага',
            'Кромка': 'Ровная',
            'Теплопроводность': '0,023 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Прочность на сжатие': 'Не менее 120 кПа'
        },
        features: [
            'Максимальная теплоизоляция',
            'Для холодных регионов',
            'Долговечность',
            'Высокая прочность'
        ]
    },
    15: {
        id: 15,
        name: 'PIRRO Stucco СТЕКЛОХОЛСТ Г2 50 мм',
        price: '890 ₽',
        image: 'images/pirro5.webp',
        hoverImage: 'images/pirro5.webp',
        description: 'Теплоизоляционная PIR плита PIRRO Stucco с двусторонней облицовкой стеклохолстом толщиной 50 мм. Идеально подходит для тонкослойных штукатурных фасадов, утепления балконов, лоджий, полов и плоских кровель.',
        specs: {
            'Размер': '600×1200 мм',
            'Толщина': '50 мм',
            'Горючесть': 'Г2',
            'Покрытие': 'Стеклохолст',
            'Кромка': 'Ровная',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Прочность на сжатие': '≥ 150 кПа',
            'Водопоглощение': 'Менее 1%',
            'Температура эксплуатации': 'от -70°C до +120°C'
        },
        features: [
            'Для штукатурных фасадов',
            'Утепление балконов и лоджий',
            'Для системы "Теплый пол"',
            'Утепление плоских кровель',
            'Высокая прочность на сжатие'
        ]
    },
    16: {
        id: 16,
        name: 'PIRRO Membrane ФОЛЬГА Г1 100 мм',
        price: '2090 ₽/м²',
        image: 'images/pirro6.webp',
        hoverImage: 'images/pirro6.webp',
        description: 'Теплоизоляционная PIR плита PIRRO Membrane с двусторонней облицовкой алюминиевой тисненой фольгой толщиной 50 мкм. Размер 2400×1200×100 мм. Профессиональное решение для плоских кровель с ПВХ мембранами, бань, саун и складов-холодильников.',
        specs: {
            'Размер': '2400×1200 мм',
            'Толщина': '100 мм',
            'Горючесть': 'Г1 (КМ1)',
            'Покрытие': 'Алюминиевая фольга 50 мкм',
            'Кромка': 'L-кромка',
            'Теплопроводность': '0,021 Вт/(м·°C)',
            'Плотность': '31 кг/м³',
            'Прочность на сжатие': '≥ 150 кПа',
            'Прочность при изгибе': '≥ 350 кПа',
            'Водопоглощение': 'Менее 1%',
            'Температура эксплуатации': 'от -70°C до +120°C',
            'Упаковка': '3 шт (8,64 м²)'
        },
        features: [
            'Для плоских кровель с ПВХ мембранами',
            'Утепление бань и саун',
            'Для складов-холодильников',
            'Максимальная толщина 100 мм',
            'Сертифицированные системы PIR-Кровля'
        ]
    },
    17: {
        id: 17,
        name: 'Клей-пена PIRROклей для PIR плит',
        price: '1050 ₽',
        image: 'images/glue.webp',
        hoverImage: 'images/glue.webp',
        description: 'Профессиональная клей-пена PIRROклей предназначена для монтажа и крепления PIR плит. Обеспечивает надежное склеивание с различными поверхностями, обладает высокой адгезией и прочностью соединения.',
        specs: {
            'Производитель': 'PirroGroup',
            'Объем баллона': '750 мл',
            'Огнестойкость': 'Огнестойкий',
            'Применение': 'Внутренние и внешние работы',
            'Температура эксплуатации': 'от -60°С до +80°С',
            'Выход пены': 'до 50 л'
        },
        features: [
            'Отсутствие запаха',
            'Высокая эластичность',
            'Отличная адгезия к материалам',
            'Устойчивость к влаге',
            'Экономичный расход'
        ]
    }
};

// Modal elements
const modal = document.getElementById('productModal');
const modalBody = document.getElementById('modalBody');
const modalClose = document.getElementById('modalClose');
const modalOverlay = document.getElementById('modalOverlay');

// Open modal function
function openProductModal(productId) {
    const product = products[productId];
    if (!product) return;

    // Generate specs HTML
    const specsHTML = Object.entries(product.specs)
        .map(([key, value]) => `
            <div class="modal-spec-item">
                <strong>${key}</strong>
                <span>${value}</span>
            </div>
        `).join('');

    // Generate features HTML
    const featuresHTML = product.features
        .map(feature => `<li>${feature}</li>`)
        .join('');

    // Generate price HTML
    const priceHTML = product.priceCash ? `
        <span class="price-cash">${product.priceCash}</span>
        <span class="price-cashless">${product.priceCashless}</span>
        <span class="price-info">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <div class="price-tooltip">Скидка<br>Оплата наличными -20%</div>
        </span>
    ` : `${product.price}`;

    // Generate modal content
    modalBody.innerHTML = `
        <div class="modal-product-image">
            <img src="${product.image}" alt="${product.name}">
        </div>
        <div class="modal-product-info">
            <h2 class="modal-product-title">${product.name}</h2>
            <div class="modal-product-price">${priceHTML}</div>
            <p class="modal-product-description">${product.description}</p>

            <div class="modal-specs">
                <h4>Технические характеристики</h4>
                <div class="modal-specs-grid">
                    ${specsHTML}
                </div>
            </div>

            <div class="modal-features">
                <h4>Преимущества</h4>
                <ul>
                    ${featuresHTML}
                </ul>
            </div>

            <div class="modal-actions">
                <a href="#order" class="btn-primary btn-full" onclick="closeProductModal()">Заказать</a>
            </div>
        </div>
    `;

    // Show modal
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

// Close modal function
function closeProductModal() {
    modal.classList.remove('active');
    document.body.style.overflow = '';
}

// Event listeners
document.addEventListener('DOMContentLoaded', () => {
    // Add click handlers to all product detail buttons
    const detailButtons = document.querySelectorAll('.product-details-btn');
    detailButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            const productId = parseInt(button.getAttribute('data-product'));
            openProductModal(productId);
        });
    });

    // Close modal on close button click
    modalClose.addEventListener('click', closeProductModal);

    // Close modal on overlay click
    modalOverlay.addEventListener('click', closeProductModal);

    // Close modal on ESC key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeProductModal();
        }
    });

    // Make price info buttons work on mobile (click to toggle)
    document.addEventListener('click', (e) => {
        const priceInfo = e.target.closest('.price-info');

        if (priceInfo) {
            e.preventDefault();
            e.stopPropagation();

            // Close all other active price-info tooltips
            document.querySelectorAll('.price-info.active').forEach(el => {
                if (el !== priceInfo) {
                    el.classList.remove('active');
                }
            });

            // Toggle current tooltip
            priceInfo.classList.toggle('active');
        } else {
            // Close all tooltips when clicking outside
            document.querySelectorAll('.price-info.active').forEach(el => {
                el.classList.remove('active');
            });
        }
    });
});
